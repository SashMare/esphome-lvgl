lvgl:
  style_definitions:
    - id: roboto15_cyrillic_style
      text_font: roboto15_cyrillic

  top_layer:
    widgets:
      - label:
          text: "-° / -°"
          id: temperatures
          styles: roboto15_cyrillic_style
          align: LV_ALIGN_TOP_LEFT
          x: 8
          y: 4
          text_color: 0xFFFFFF

      - label:
          text: "--:--"
          id: display_time
          styles: roboto15_cyrillic_style
          align: LV_ALIGN_TOP_MID
          x: 0
          y: 4
          text_align: LV_TEXT_ALIGN_CENTER
          text_color: 0xFFFFFF

  pages:
    - id: main_page
      layout:
        type: flex
        flex_flow: LV_FLEX_FLOW_COLUMN_WRAP

      width: 480
      bg_color: 0x222222
      bg_opa: LV_OPA_COVER

      pad_top: 30
      pad_bottom: 5
      pad_left: 5
      pad_right: 5

      widgets:
        # ==================== BATTERY ARC ====================
        - arc:
            id: battery_arc
            align: LV_ALIGN_TOP_MID
            width: 300
            height: 300
            rotation: 135
            min_value: 0
            max_value: 100
            value: !lambda |-
              return round(id(battery_soc).state);
            bg_color: 0x222222
            bg_opa: LV_OPA_COVER
            line_width: 35
            line_color: 0x444444
            indicator:
              arc_color: 0x00FF00

        - label:
            id: battery_soc_label
            align: LV_ALIGN_TOP_MID
            y: -50
            text_font: montserrat_48
            text_color: 0xFFFFFF
            text: !lambda |-
              char buf[10];
              snprintf(buf, sizeof(buf), "%.1f%%", id(battery_soc).state);
              return buf;

        - label:
            id: battery_voltage_label
            align: LV_ALIGN_TOP_MID
            y: 110
            text_font: roboto15_cyrillic
            text_color: 0xFFFFFF
            text: !lambda |-
              char buf[20];
              snprintf(buf, sizeof(buf), "Напруга: %.2f В", id(battery_voltage).state);
              return buf;

        - label:
            id: battery_current_label
            align: LV_ALIGN_TOP_MID
            y: 140
            text_font: roboto15_cyrillic
            text_color: 0xFFFFFF
            text: !lambda |-
              char buf[20];
              snprintf(buf, sizeof(buf), "Струм: %.2f А", id(battery_current).state);
              return buf;

        # ==================== BATTERY TABLE ====================
        - obj:
            id: battery_table_container
            align: LV_ALIGN_BOTTOM_MID
            y: -10
            width: lv_px(470)
            height: lv_px(200)
            bg_color: 0x111111
            bg_opa: 204
            border_width: 2
            border_color: 0x00FF00
            radius: 15
            pad_all: 8
            layout:
              type: flex
              flex_flow: LV_FLEX_FLOW_COLUMN

            widgets:
              - obj:
                  width: 470
                  height: 35
                  layout:
                    type: flex
                    flex_flow: LV_FLEX_FLOW_ROW
                  widgets:
                    - label: { width: 50,  text: "№",      text_color: 0x00FF00, text_align: LV_TEXT_ALIGN_CENTER }
                    - label: { width: 70,  text: "SOC",    text_color: 0x00FF00, text_align: LV_TEXT_ALIGN_CENTER }
                    - label: { width: 80,  text: "State",  text_color: 0x00FF00, text_align: LV_TEXT_ALIGN_CENTER }
                    - label: { width: 70,  text: "V",      text_color: 0x00FF00, text_align: LV_TEXT_ALIGN_CENTER }
                    - label: { width: 70,  text: "A",      text_color: 0x00FF00, text_align: LV_TEXT_ALIGN_CENTER }
                    - label: { width: 90,  text: "Cycles", text_color: 0x00FF00, text_align: LV_TEXT_ALIGN_CENTER }
                    - label: { width: 120, text: "Temp",   text_color: 0x00FF00, text_align: LV_TEXT_ALIGN_CENTER }

              - obj:
                  width: 470
                  height: 40
                  layout:
                    type: flex
                    flex_flow: LV_FLEX_FLOW_ROW
                  widgets:
                    - label:
                        width: 50
                        text: "Стек"
                        text_color: 0xFFFFFF
                        text_align: LV_TEXT_ALIGN_CENTER

                    - label:
                        width: 70
                        text_color: 0xFFFFFF
                        text_align: LV_TEXT_ALIGN_CENTER
                        text: !lambda |-
                          char buf[10];
                          snprintf(buf, sizeof(buf), "%.0f%%", id(battery_soc).state);
                          return buf;

                    - label:
                        width: 80
                        text_color: 0xFFFFFF
                        text_align: LV_TEXT_ALIGN_CENTER
                        text: !lambda |-
                          return id(battery_status).state.c_str();

                    - label:
                        width: 70
                        text_color: 0xFFFFFF
                        text_align: LV_TEXT_ALIGN_CENTER
                        text: !lambda |-
                          char buf[10];
                          snprintf(buf, sizeof(buf), "%.2f", id(battery_voltage).state);
                          return buf;

                    - label:
                        width: 70
                        text_color: 0xFFFFFF
                        text_align: LV_TEXT_ALIGN_CENTER
                        text: !lambda |-
                          char buf[10];
                          snprintf(buf, sizeof(buf), "%.2f", id(battery_current).state);
                          return buf;

                    - label:
                        width: 90
                        text_color: 0xFFFFFF
                        text_align: LV_TEXT_ALIGN_CENTER
                        text: !lambda |-
                          char buf[10];
                          snprintf(buf, sizeof(buf), "%.0f", id(battery_cycles).state);
                          return buf;

                    - label:
                        width: 120
                        text_color: 0xFFFFFF
                        text_align: LV_TEXT_ALIGN_CENTER
                        text: !lambda |-
                          char buf[20];
                          snprintf(buf, sizeof(buf), "%.1f °C", id(battery_temp).state);
                          return buf;
